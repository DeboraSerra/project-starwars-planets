(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{11:function(e,t,a){e.exports=a.p+"static/media/Star_Wars_logo-1.5d100186.png"},12:function(e,t,a){e.exports=a(19)},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),o=(a(17),Object(n.createContext)()),u=function(){var e=Object(n.useContext)(o).data;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rotation Period"),r.a.createElement("th",null,"Orbital Period"),r.a.createElement("th",null,"Diameter"),r.a.createElement("th",null,"Climate"),r.a.createElement("th",null,"Gravity"),r.a.createElement("th",null,"Terrain"),r.a.createElement("th",null,"Surface Water"),r.a.createElement("th",null,"Population"))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement("tr",{key:e.name},r.a.createElement("td",{"data-testid":"planet-name"},e.name),r.a.createElement("td",null,e.rotation_period),r.a.createElement("td",null,e.orbital_period),r.a.createElement("td",null,e.diameter),r.a.createElement("td",null,e.climate),r.a.createElement("td",null,e.gravity),r.a.createElement("td",null,e.terrain),r.a.createElement("td",null,e.surface_water),r.a.createElement("td",null,e.population))}))))},i=a(6),m=a(1),s=a(3),f=a(7),d=a.n(f),p=a(10),b=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://swapi-trybe.herokuapp.com/api/planets/",e.next=3,fetch("https://swapi-trybe.herokuapp.com/api/planets/");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a.results);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e){var t=e.children,a=Object(n.useState)({planets:[],data:[],name:"",filterByNumericValue:[],order:{column:"",sort:""}}),l=Object(s.a)(a,2),c=l[0],u=l[1];Object(n.useEffect)((function(){b().then((function(e){var t=e.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}));u((function(e){return Object(m.a)(Object(m.a)({},e),{},{data:t,planets:t})}))}))}),[]);var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=c.planets,a=c.filterByNumericValue,n=t;if(a.forEach((function(e){var a=e.column,r=e.comparison,l=e.value;switch(r){case"maior que":n=n.filter((function(e){return parseFloat(e[a])>l}));break;case"menor que":n=n.filter((function(e){return parseFloat(e[a])<l}));break;case"igual a":n=n.filter((function(e){return e[a]===l}));break;default:n=t}})),e){var r=e.col,l=e.comp,o=e.val;switch(l){case"maior que":n=n.filter((function(e){return parseFloat(e[r])>o}));break;case"menor que":n=n.filter((function(e){return parseFloat(e[r])<o}));break;case"igual a":n=n.filter((function(e){return e[r]===o}));break;default:n=t}}u((function(e){return Object(m.a)(Object(m.a)({},e),{},{data:n})}))};Object(n.useEffect)((function(){f()}),[c.filterByNumericValue]),Object(n.useEffect)((function(){var e=c.data,t=c.order,a=t.column,n=t.sort,r=[];if("population"===a){var l=e.filter((function(e){return"unknown"!==e.population})),o=e.filter((function(e){return"unknown"===e.population})),s=[];s="ASC"===n?l.sort((function(e,t){return e[a]-t[a]})):l.sort((function(e,t){return t[a]-e[a]})),r=[].concat(Object(i.a)(s),Object(i.a)(o))}else{var f=[];f="ASC"===n?e.sort((function(e,t){return e[a]-t[a]})):e.sort((function(e,t){return t[a]-e[a]})),r=f}u((function(e){return Object(m.a)(Object(m.a)({},e),{},{data:r})}))}),[c.order]);var d={data:c.data,filterByName:{name:c.name},filterByNumericValue:c.filterByNumericValue,handleNameChange:function(e){var t=e.target.value;u((function(e){return Object(m.a)(Object(m.a)({},e),{},{name:t,data:c.planets.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))})}))},setNumericFilter:function(e){var t=e.column,a=e.comparison,n=e.value;u((function(e){return Object(m.a)(Object(m.a)({},e),{},{filterByNumericValue:[].concat(Object(i.a)(e.filterByNumericValue),[{id:Math.random(),column:t,comparison:a,value:n}])})})),f({col:t,comp:a,val:n})},removeFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=c.filterByNumericValue,a=c.planets;if(e){var n=t.filter((function(t){return t.id!==e}));u((function(e){return Object(m.a)(Object(m.a)({},e),{},{filterByNumericValue:n})}))}else u((function(e){return Object(m.a)(Object(m.a)({},e),{},{filterByNumericValue:[],data:a})}))},addSort:function(e){var t=e.column,a=e.sort;u((function(e){return Object(m.a)(Object(m.a)({},e),{},{order:{column:t,sort:a}})}))}};return r.a.createElement(o.Provider,{value:d},t)},E=function(){var e=Object(n.useContext)(o),t=e.filterByName.name,a=e.handleNameChange;return r.a.createElement("input",{className:"filter-name",type:"text","data-testid":"name-filter",value:t,onChange:a,placeholder:"Find a planet"})},h=a(2),j=function(){var e=Object(n.useState)({column:"population",comparison:"maior que",value:0}),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useContext)(o),u=c.setNumericFilter,i=c.filterByNumericValue,f=function(e){var t=e.target,a=t.name,n=t.value;l((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(h.a)({},a,n))}))},d=["population","orbital_period","diameter","rotation_period","surface_water"].filter((function(e){return t=e,!i.some((function(e){return e.column===t}));var t}));return r.a.createElement("section",{className:"number-filter"},r.a.createElement("label",{htmlFor:"column"},"Find",r.a.createElement("select",{name:"column",id:"column","data-testid":"column-filter",value:a.column,onChange:f},d.map((function(e){return r.a.createElement("option",{value:e},e)})))),r.a.createElement("label",{htmlFor:"comparison"},"That is",r.a.createElement("select",{name:"comparison",id:"comparison","data-testid":"comparison-filter",value:a.comparison,onChange:f},r.a.createElement("option",{value:"maior que"},"maior que"),r.a.createElement("option",{value:"menor que"},"menor que"),r.a.createElement("option",{value:"igual a"},"igual a"))),r.a.createElement("input",{type:"number","data-testid":"value-filter",name:"value",value:a.value,onChange:f}),r.a.createElement("button",{type:"button","data-testid":"button-filter",onClick:function(){var e=a.column,t=a.comparison,n=a.value;u({column:e,comparison:t,value:n}),l({column:d[0],comparison:"maior que",value:0})},disabled:0===d.length},"Filter"))},O=function(){var e=Object(n.useContext)(o),t=e.filterByNumericValue,a=e.removeFilter;return r.a.createElement("section",{className:"filters"},r.a.createElement("button",{type:"button",onClick:function(){return a()},"data-testid":"button-remove-filters"},"Remove All Filters"),r.a.createElement("section",{className:"filters-list"},t.map((function(e){var t=e.id,n=e.column,l=e.comparison,c=e.value;return r.a.createElement("p",{key:t,"data-testid":"filter",className:"filter"},r.a.createElement("span",null,"".concat(n," ").concat(l," ").concat(c)),r.a.createElement("button",{type:"button",onClick:function(){return a(t)},className:"delete-btn"},"X"))}))))},y=function(){var e=Object(n.useState)({column:"population",sort:"asc"}),t=Object(s.a)(e,2),a=t[0],l=t[1],c=function(e){var t=e.target,a=t.name,n=t.value;l((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(h.a)({},a,n))}))},u=Object(n.useContext)(o).addSort;return r.a.createElement("section",{className:"sort"},r.a.createElement("label",{htmlFor:"column"},"Select a column",r.a.createElement("select",{name:"column",id:"column","data-testid":"column-sort",onChange:c,value:a.column},r.a.createElement("option",{value:"population"},"population"),r.a.createElement("option",{value:"orbital_period"},"orbital_period"),r.a.createElement("option",{value:"diameter"},"diameter"),r.a.createElement("option",{value:"rotation_period"},"rotation_period"),r.a.createElement("option",{value:"surface_water"},"surface_water"))),r.a.createElement("section",{onChange:c,className:"radio-sort"},r.a.createElement("label",{htmlFor:"asc"},r.a.createElement("input",{type:"radio",name:"sort",id:"asc",value:"ASC","data-testid":"column-sort-input-asc"}),"Upward"),r.a.createElement("label",{htmlFor:"desc"},r.a.createElement("input",{type:"radio",name:"sort",id:"desc",value:"DESC","data-testid":"column-sort-input-desc"}),"Downward")),r.a.createElement("button",{type:"button","data-testid":"column-sort-button",onClick:function(){var e=a.column,t=a.sort;u({column:e,sort:t})}},"Sort data"))},N=a(11),C=a.n(N),g=function(){return r.a.createElement(v,null,r.a.createElement("div",{className:"stars"}),r.a.createElement("div",{className:"img-sect perspective"},r.a.createElement("img",{className:"fade",src:C.a,alt:"Star Wars Planets"})),r.a.createElement("div",{className:"filter-selectors"},r.a.createElement(E,null),r.a.createElement(j,null),r.a.createElement(y,null)),r.a.createElement(O,null),r.a.createElement(u,null))};c.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.91b2fc43.chunk.js.map